{% if uuid is not empty %}
    {% set post = createModel('Posts','blog').findById(uuid) %}
{% endif %}
{% set category = createModel('Category','category').getList(null,'blog') %}

<form class="form" id="editor_form">
    <input type="hidden" value="{{ page }}" name="page" id="page">
    <input type="hidden" value="{{ uuid }}" name="uuid" id="uuid">
    <div class="{{ theme.form.field }}">
        {% if uuid is not empty %}
            <label class="{{ theme.form.label }}">
                {{ labels.date }}
            </label>
            <div class="flex flex-row items-center">
                {% if post.date_created is not null %}
                <div class="flex flex-row items-center px-4">
                    <span class="px-2">{{ labels.created }}</span>
                    <span class="badge badge-sm badge-outline">
                        {{ post.date_created|dateFormat }}
                    </span>
                </div>
                {% endif %}                
                {% if post.date_updated is not null %}
                <div class="flex flex-row items-center px-4">
                    <span class="px-2">{{ labels.updated }}</span>
                    <span class="badge badge-sm badge-outline">
                        {{ post.date_updated|dateFormat }}
                    </span>
                </div>
                {% endif %}
            </div>
        {% endif %}
    </div> 
    <div class="{{ theme.form.fields }}">
        <div class="{{ theme.form.field }}">
            <label class="{{ theme.form.label }}">
                {{ labels.title }}
            </label>
            <input 
                class="{{ theme.form.input }}"
                rule="minLength[2]" 
                id="title"
                name="title" 
                type="text" 
                placeholder="{{ placeholders.title }}" 
                value="{{ post.title }}">
        </div>
        <div class="{{ theme.form.field }}">
            <label class="{{ theme.form.label }}">
                {{ labels.status }}
            </label>
            {{  component('blog::admin.status.dropdown',{ 
                    id: 'post_status', 
                    selected: post.status, 
                    uuid: uuid
                }) 
            }}   
        </div>  
    </div>
    {% if uuid is not empty %}
    <div class="{{ theme.form.field }}">
        <label class="{{ theme.form.label }}">
            {{ labels.category }}
        </label>      
        {{  component('system:admin.orm.relations.fields.dropdown',{ 
                model: 'CategoryRelations',
                extension: 'category',
                type: 'post',
                relation_id: post.id,
                items: category,
                class: 'fluid'
            }) 
        }}   
    </div>
    {% endif %}
    <div class="mt-4 {{ theme.form.field }}">
        <textarea 
            class="{{ theme.form.textarea }}" 
            name="content" 
            id="editor">{{ post.content }}</textarea>     
    </div>
    {{ component('system:form.footer') }}    
</form>